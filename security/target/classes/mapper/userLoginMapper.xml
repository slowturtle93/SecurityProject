<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="userLoginMapper">

 	<select id="selectUserById" resultType="com.khs.pjt.Web.vo.CustomUserDetails">
		SELECT loginId AS ID
		     , loginPw AS PASSWORD
		     , userNm AS NAME
		     , authority AS AUTHORITY
		     , enabled AS ENABLED
		     , failureCnt 
		  FROM TBL_USER_INFO
		 WHERE loginId = #{loginId}
	</select>
	
	<update id="updateFailureCount">
		UPDATE TBL_USER_INFO
		   SET failureCnt = failureCnt + 1
		 WHERE loginId = #{loginId}
	</update>
	
	<select id="checkFailureCount" resultType="Integer">
		SELECT failureCnt
		  FROM TBL_USER_INFO
		 WHERE loginId = #{loginId}
	</select>
	
	<update id="updateUnenabled">
		UPDATE TBL_USER_INFO
		   SET ENABLED = 0
		 WHERE loginId = #{loginId}
	</update>
	
 </mapper>